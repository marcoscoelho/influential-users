<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Influential Users</title>

  <!-- CSS -->
  <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,700&amp;subset=latin-ext" rel="stylesheet">
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="main.css">
</head>
<body>

  <!-- navigation bar -->
  <nav class="navbar navbar-default">
    <div class="container">
      <a href="." class="navbar-brand">
        <i class="fa fa-line-chart" aria-hidden="true"></i>
        Influential Users
      </a>
    </div>
  </nav>

  <!-- main body of our application -->
  <div class="container" id="influential-rank">

    <!-- brands list -->
    <div class="brands-wrap col-sm-4">
      <h3>Brands</h3>
      <ul class="brand-list list-unstyled" id="brands">
        <li class="brand-item" v-for="brand in brands">
          <a class="brand-link" href="javascript:void(0);"
             v-bind:class="{ active: brand.active }"
             v-bind:title="'Clicking here ' + numberOfInteractions({ brand: brand.id }) + ' interactions from this brand will be ' + (brand.active ? 'disable.' : 'enable.')"
             v-on:click="toggleActive(brand)">
            <img class="brand-img" v-bind:src="brand.image" v-bind:alt="brand.name">
            <span>{{ brand.name }}</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- users list -->
    <div class="users-wrap col-sm-8">
      <h3>Interactions ({{ totalInteractions }})</h3>
      <ul id="types">
        <li v-for="type in typesOfInteraction">

          <div class="chart"
             v-bind:id="'chart-'+lowercase(type.id)"
             v-bind:class="{ active: type.active }"
             v-bind:title="'Clicking here ' + numberOfInteractions({ type: type.id }) + ' interactions from this type will be ' + (type.active ? 'disable.' : 'enable.')"
             v-on:click="toggleActive(type)">
            <div class="percentage" v-bind:data-percent="percentageOfInteraction(type, null, false)">
              <span>{{ percentageOfInteraction(type, null, false) }}</span><sup>%</sup>
            </div>
            <div class="label">{{ type.name }}</div>
          </div>

        </li>
      </ul>
      <h3>Actions</h3>
      <ul>
        <li>
          Sort [
            <span v-bind:class="{ active: (userOrder.orderBy == 'totalInteractions') }" v-on:click="sortUsersBy('totalInteractions', 'desc')">Influence</span> |
            <span v-bind:class="{ active: (userOrder.orderBy == 'name.first') }" v-on:click="sortUsersBy('name.first', 'asc')">Name</span> |
            <span v-bind:class="{ active: (userOrder.orderBy == 'registered' && userOrder.order == 'asc') }" v-on:click="sortUsersBy('registered', 'asc')">Old Users</span> |
            <span v-bind:class="{ active: (userOrder.orderBy == 'registered' && userOrder.order == 'desc') }" v-on:click="sortUsersBy('registered', 'desc')">New Users </span>
          ]
        </li>
        <li>
          Filter [
            <span v-bind:class="{ active: userFilters.ageGroup.tens }" v-on:click="toggleFilter('ageGroup', 'tens')">Tens</span> |
            <span v-bind:class="{ active: userFilters.ageGroup.adults }" v-on:click="toggleFilter('ageGroup', 'adults')">Adults</span> |
            <span v-bind:class="{ active: userFilters.gender.male }" v-on:click="toggleFilter('gender', 'male')">Men</span> |
            <span v-bind:class="{ active: userFilters.gender.female }" v-on:click="toggleFilter('gender', 'female')">Women</span>
          ]
        </li>
        <li v-if="totalInteractions > 0" v-on:click="exportsAsCSV()">
          Exports as CSV
        </li>
      </ul>
      <h3>Users ({{ totalUsers }})</h3>
      <ul id="users">
        <li v-for="user in influentialUsers">
          {{ user.fullName }} [
            <span v-for="type in typesOfInteraction" v-bind:class="lowercase(type.id)" v-bind:style="{ width: percentageOfInteraction(type, user) }">
              {{ numberOfInteractions({ user: user.id, type: type.id }) }}
            </span>
          ] {{ percentageOfInfluence(user) }} ({{ numberOfInteractions({ user: user.id }) }})
        </li>
      </ul>
    </div>
  </div>

  <!-- JS -->
  <script src="node_modules/vue/dist/vue.js"></script>
  <script src="node_modules/vue-resource/dist/vue-resource.js"></script>
  <script src="node_modules/lodash/lodash.js"></script>
  <script src="node_modules/json2csv/dist/json2csv.js"></script>
  <script src="node_modules/easy-pie-chart/dist/easypiechart.min.js"></script>
  <script src="app.js"></script>
</body>
</html>